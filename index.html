<!DOCTYPE html>
<html data-bs-theme="dark">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Tetris</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="wrapper">
        <div class="instructions">
            <button class="btn btn-secondary instruction-toggle w-100" type="button" 
                    data-bs-toggle="collapse" 
                    data-bs-target="#howToPlay" 
                    aria-expanded="false">
                How to Play <i class="fas fa-chevron-down ms-2"></i>
            </button>
            <div class="collapse" id="howToPlay">
                <div class="instruction-content">
                    <h3>Desktop Controls:</h3>
                    <ul>
                        <li>← → : Move piece left/right</li>
                        <li>↓ : Move piece down</li>
                        <li>↑ : Rotate piece</li>
                    </ul>
                    
                    <h3>Mobile Controls:</h3>
                    <ul>
                        <li>Use on-screen buttons</li>
                        <li>Tap ↻ to rotate</li>
                        <li>Tap arrows to move</li>
                    </ul>
                    
                    <h3>Game Rules:</h3>
                    <ul>
                        <li>Complete lines to score points</li>
                        <li>Stack reaches top = Game Over</li>
                        <li>100 points per line cleared</li>
                    </ul>
                </div>
            </div>
        </div>
    <div class="game-container">
        <div class="row">
            <div class="col-md-8">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">Tetris</h5>
                        <canvas id="tetris" width="240" height="400"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card preview-card shadow-sm">
                    <div class="card-body">
                        <h6 class="card-title">Next Piece</h6>
                        <canvas id="preview" width="160" height="160"></canvas>
                    </div>
                </div>
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h6 class="card-title">Score: <span id="score">0</span></h6>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Single controls section -->
    <div class="controls-section">
        <div class="card shadow-sm">
            <div class="card-body">
                <h6 class="card-title">Controls</h6>
                <div class="controls d-flex flex-column align-items-center">
                    <button id="rotate" class="btn btn-primary btn-control mb-2">
                        <i class="fas fa-redo"></i>
                    </button>
                    <div class="d-flex justify-content-center gap-2">
                        <button id="left" class="btn btn-primary btn-control">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <button id="down" class="btn btn-primary btn-control">
                            <i class="fas fa-arrow-down"></i>
                        </button>
                        <button id="right" class="btn btn-primary btn-control">
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const howToPlay = document.getElementById('howToPlay');
            const toggle = document.querySelector('.instruction-toggle i');
            
            howToPlay.addEventListener('show.bs.collapse', function () {
                toggle.style.transform = 'rotate(180deg)';
            });
            
            howToPlay.addEventListener('hide.bs.collapse', function () {
                toggle.style.transform = 'rotate(0deg)';
            });
            
            // Set initial state based on screen size
            if (window.innerWidth > 768) {
                new bootstrap.Collapse(howToPlay, { show: true });
            }
        });
    </script>
    <script src="js/tetris.js"></script>
</body>
</html>